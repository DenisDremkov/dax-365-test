(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{QChz:function(e,r,t){"use strict";t.r(r),t.d(r,"LoginModule",function(){return y});var o=t("ofXK"),i=t("3Pt+"),n=t("tyNb"),s=t("PCNd"),a=t("FqNy"),c=t("z6cu"),l=t("JIr8"),u=t("eIep"),b=t("fXoL"),d=t("5eHb"),p=t("+9sT"),h=t("HDdC"),g=t("Jgta"),m=t("UbJi");let f=(()=>{class e{constructor(e){this.afAuth=e}login(e){return new h.a(r=>{this.afAuth.setPersistence(g.a.auth.Auth.Persistence.SESSION).then(()=>{this.afAuth.signInWithEmailAndPassword(e.email,e.password).then(e=>{r.next(e),r.complete()}).catch(e=>{r.error(e),r.complete()})}).catch(e=>{console.error(e)})})}}return e.\u0275fac=function(r){return new(r||e)(b.Wb(m.a))},e.\u0275prov=b.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var x=t("jrsp"),w=t("/0IE"),v=t("rAr6"),P=t("KzMV");function S(e,r){if(1&e&&b.Nb(0,"dax365-error-message",14),2&e){const e=b.bc();b.hc("showRequiredError",e.formGroup.controls.email.errors.required)("showEmailPatternError",e.formGroup.controls.email.errors.email)}}function R(e,r){if(1&e&&b.Nb(0,"dax365-error-message",15),2&e){const e=b.bc();b.hc("showRequiredError",e.formGroup.controls.password.errors.required)}}const _=n.c.forChild([{path:"",component:(()=>{class e{constructor(e,r,t,o){this._toastrService=e,this._authUserStateService=r,this._loginHttpService=t,this._coreRouterService=o,this.inProgress=!1,this.isPasswVisisble=!1}ngOnInit(){this._initForm()}_initForm(){const e=new i.b(void 0,[i.l.required,i.l.email]);e.valueChanges.subscribe(r=>{null!=r&&""===r.trim()&&e.setValue(void 0)});const r=new i.b(void 0,[i.l.required]);r.valueChanges.subscribe(e=>{null!=e&&""===e.trim()&&r.setValue(void 0)}),this.formGroup=new i.e({email:e,password:r})}login(){this.isSubmitted=!0,this.formGroup.valid&&(this.inProgress=!0,this._loginHttpService.login({email:this.formGroup.controls.email.value,password:this.formGroup.controls.password.value}).pipe(Object(l.a)(e=>(this._toastrService.error(e.message),this.inProgress=!1,Object(c.a)(e))),Object(u.a)(()=>this._authUserStateService.subscribeToFirebaseUser()),Object(u.a)(e=>this._authUserStateService.getProfile(e))).subscribe(e=>{e?this._coreRouterService.goToDefaultPage():this._coreRouterService.goToCompleteProfilePage(),this.inProgress=!1}))}goToRegistration(){this._coreRouterService.goToRegistrPage()}}return e.\u0275fac=function(r){return new(r||e)(b.Mb(d.b),b.Mb(p.a),b.Mb(f),b.Mb(x.b))},e.\u0275cmp=b.Gb({type:e,selectors:[["dax365-login"]],decls:23,vars:6,consts:[[1,"dax365-auth-container"],[1,"dax365-flex-c-c"],[1,"dax365-auth-container__content"],[3,"formGroup"],[1,"form-group"],[1,"dax365-input-title"],["type","email","placeholder","email","formControlName","email",1,"dax365-input",3,"keyup.enter"],[3,"showRequiredError","showEmailPatternError",4,"ngIf"],[3,"isVisible","togglePasswVisibility"],["placeholder","password","formControlName","password",1,"dax365-input",3,"type","keyup.enter"],[3,"showRequiredError",4,"ngIf"],[1,"dax365-flex-c-c","dax365-flex-column"],["type","button",1,"dax365-btn","dax365-btn-primary",3,"disabled","click"],[1,"dax365-link",3,"click"],[3,"showRequiredError","showEmailPatternError"],[3,"showRequiredError"]],template:function(e,r){1&e&&(b.Sb(0,"div",0),b.Sb(1,"div",1),b.Nb(2,"dax365-logo"),b.Rb(),b.Sb(3,"div",2),b.Sb(4,"h2"),b.zc(5,"Welcome back"),b.Rb(),b.Sb(6,"form",3),b.Sb(7,"div",4),b.Sb(8,"div",5),b.zc(9,"email"),b.Rb(),b.Sb(10,"input",6),b.Zb("keyup.enter",function(){return r.login()}),b.Rb(),b.xc(11,S,1,2,"dax365-error-message",7),b.Rb(),b.Sb(12,"div",4),b.Sb(13,"div",5),b.zc(14,"password"),b.Rb(),b.Sb(15,"dax365-password-wrapper",8),b.Zb("togglePasswVisibility",function(){return r.isPasswVisisble=!r.isPasswVisisble}),b.Sb(16,"input",9),b.Zb("keyup.enter",function(){return r.login()}),b.Rb(),b.Rb(),b.xc(17,R,1,1,"dax365-error-message",10),b.Rb(),b.Rb(),b.Sb(18,"footer",11),b.Sb(19,"button",12),b.Zb("click",function(){return r.login()}),b.zc(20," login "),b.Rb(),b.Sb(21,"button",13),b.Zb("click",function(){return r.goToRegistration()}),b.zc(22," go to registration "),b.Rb(),b.Rb(),b.Rb(),b.Rb()),2&e&&(b.Bb(6),b.hc("formGroup",r.formGroup),b.Bb(5),b.hc("ngIf",r.formGroup.controls.email.invalid&&(r.isSubmitted||r.formGroup.controls.email.dirty)),b.Bb(4),b.hc("isVisible",r.isPasswVisisble),b.Bb(1),b.ic("type",r.isPasswVisisble?"text":"password"),b.Bb(1),b.hc("ngIf",r.formGroup.controls.password.invalid&&(r.isSubmitted||r.formGroup.controls.password.dirty)),b.Bb(2),b.hc("disabled",r.inProgress))},directives:[w.a,i.m,i.j,i.f,i.a,i.i,i.d,o.l,v.a,P.a],styles:[".dax365-auth-container[_ngcontent-%COMP%]{display:block;padding-top:100px;padding-bottom:100px;margin:0 auto;max-width:400px}.dax365-auth-container[_ngcontent-%COMP%]   dax365-logo[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.dax365-auth-container__content[_ngcontent-%COMP%]{border-radius:4px;margin-top:100px;padding:30px;background-color:#232e36}.dax365-auth-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.dax365-auth-container[_ngcontent-%COMP%]   .dax365-link[_ngcontent-%COMP%]{display:inline-block;margin:30px auto 0}.dax365-auth-container[_ngcontent-%COMP%]   .dax365-btn-primary[_ngcontent-%COMP%]{margin-top:30px;width:100%}"]}),e})()}]);let y=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=b.Kb({type:e}),e.\u0275inj=b.Jb({imports:[[o.c,n.c,i.g,i.k,_,s.a,a.a]]}),e})()}}]);